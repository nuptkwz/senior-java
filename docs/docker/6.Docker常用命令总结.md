[toc]
>ä»¥ä¸‹ä¸º Docker è¿ç»´ä¸­æœ€æ ¸å¿ƒçš„ **20 ä¸ªé«˜é¢‘å‘½ä»¤**ï¼Œæ¶µç›–å®¹å™¨ç®¡ç†ã€é•œåƒæ“ä½œã€ç½‘ç»œé…ç½®ç­‰æ ¸å¿ƒåœºæ™¯ï¼Œé™„å®žæˆ˜ç¤ºä¾‹ä¸Žå‚æ•°è§£æžï¼ŒåŠ©ä½ é«˜æ•ˆé©¾é©­å®¹å™¨åŒ–çŽ¯å¢ƒï¼š

---

### ðŸ“¦ ä¸€ã€å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
1. **`docker run`**  
   åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ï¼Œæœ€å¸¸ç”¨å‘½ä»¤ï¼š
   ```bash
   docker run -d --name web -p 8080:80 -v /data:/app nginx:1.25
   ```  
    - `-d`ï¼šåŽå°è¿è¡Œ
    - `-p å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£`ï¼šç«¯å£æ˜ å°„
    - `-v å®¿ä¸»æœºè·¯å¾„:å®¹å™¨è·¯å¾„`ï¼šæ•°æ®å·æŒ‚è½½

2. **`docker ps`**  
   æŸ¥çœ‹å®¹å™¨çŠ¶æ€ï¼š
   ```bash
   docker ps -a  # åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ˆå«å·²åœæ­¢ï¼‰
   docker ps -q  # ä»…è¾“å‡ºå®¹å™¨IDï¼ˆç”¨äºŽè„šæœ¬å¤„ç†ï¼‰
   ```  

3. **`docker start/stop/restart`**  
   å¯åœæŽ§åˆ¶ï¼š
   ```bash
   docker stop web  # ä¼˜é›…åœæ­¢ï¼ˆSIGTERMï¼‰
   docker start web  # å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨
   docker restart web  # é‡å¯å®¹å™¨ 
   ```  

4. **`docker exec`**  
   è¿›å…¥è¿è¡Œä¸­å®¹å™¨ï¼š
   ```bash
   docker exec -it web /bin/bash  # å¯åŠ¨äº¤äº’å¼ç»ˆç«¯
   ```  
   > âš ï¸ ä¸Ž `attach` åŒºåˆ«ï¼š`exec` åˆ›å»ºæ–°ä¼šè¯ï¼Œé€€å‡ºä¸å½±å“å®¹å™¨

5. **`docker rm`**  
   åˆ é™¤å®¹å™¨ï¼š
   ```bash
   docker rm -f web  # å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­å®¹å™¨ï¼ˆæ…Žç”¨ï¼‰
   docker container prune  # æ¸…ç†æ‰€æœ‰åœæ­¢çš„å®¹å™¨ 
   ```  

---

### ðŸ—ï¸ äºŒã€é•œåƒç®¡ç†
6. **`docker pull`**  
   æ‹‰å–é•œåƒï¼š
   ```bash
   docker pull ubuntu:22.04  # æ˜¾å¼æŒ‡å®šç‰ˆæœ¬ï¼ˆé¿å… latestï¼‰
   ```  

7. **`docker images`**  
   æŸ¥çœ‹æœ¬åœ°é•œåƒï¼š
   ```bash
   docker images --filter "dangling=false"  # è¿‡æ»¤æ‚¬ç©ºé•œåƒ 
   ```  

8. **`docker rmi`**  
   åˆ é™¤é•œåƒï¼š
   ```bash
   docker rmi alpine:3.17  # åˆ é™¤æŒ‡å®šç‰ˆæœ¬
   docker image prune  # æ¸…ç†æ‚¬ç©ºé•œåƒ 
   ```  

9. **`docker build`**  
   æž„å»ºè‡ªå®šä¹‰é•œåƒï¼š
   ```bash
   docker build -t myapp:v1 --build-arg ENV=prod .
   ```  
    - `.`ï¼šDockerfile ä¸Šä¸‹æ–‡è·¯å¾„

10. **`docker push`**  
    æŽ¨é€é•œåƒåˆ°ä»“åº“ï¼š
    ```bash
    docker push my-registry.com/app:v1
    ```  

---

### ðŸŒ ä¸‰ã€ç½‘ç»œä¸Žå­˜å‚¨
11. **`docker network create`**  
    åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œï¼š
    ```bash
    docker network create --driver bridge app_net  # æŒ‡å®šé©±åŠ¨ç±»åž‹ 
    ```  

12. **`docker network connect`**  
    å°†å®¹å™¨åŠ å…¥ç½‘ç»œï¼š
    ```bash
    docker network connect app_net web
    ```  

13. **`docker volume create`**  
    åˆ›å»ºæŒä¹…åŒ–æ•°æ®å·ï¼š
    ```bash
    docker volume create db_data  # å‘½åå·ï¼ˆä¼˜äºŽåŒ¿åå·ï¼‰
    ```  

14. **`docker cp`**  
    ä¸»æœºä¸Žå®¹å™¨é—´å¤åˆ¶æ–‡ä»¶ï¼š
    ```bash
    docker cp web:/etc/nginx/nginx.conf ./  # å®¹å™¨ â†’ ä¸»æœº
    docker cp ./config.ini web:/app/  # ä¸»æœº â†’ å®¹å™¨ 
    ```  

---

### ðŸ” å››ã€è¿ç»´ä¸Žç›‘æŽ§
15. **`docker logs`**  
    æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š
    ```bash
    docker logs -f --tail 100 web  # å®žæ—¶è¿½è¸ªå°¾éƒ¨100è¡Œ 
    ```  

16. **`docker inspect`**  
    æŸ¥çœ‹å®¹å™¨/é•œåƒå…ƒæ•°æ®ï¼š
    ```bash
    docker inspect web | jq .NetworkSettings.IPAddress  # æå–å®¹å™¨IP 
    ```  

17. **`docker stats`**  
    å®žæ—¶ç›‘æŽ§èµ„æºä½¿ç”¨ï¼š
    ```bash
    docker stats web mysql  # ç›‘æŽ§æŒ‡å®šå®¹å™¨ï¼ˆCPU/å†…å­˜/ç½‘ç»œï¼‰
    ```  

18. **`docker update`**  
    åŠ¨æ€è°ƒæ•´å®¹å™¨é…ç½®ï¼š
    ```bash
    docker update --memory 1g --cpus 2 web  # è°ƒæ•´å†…å­˜å’ŒCPUé™åˆ¶ 
    ```  

---

### ðŸ§¹ äº”ã€ç³»ç»Ÿç»´æŠ¤
19. **`docker system prune`**  
    æ¸…ç†æœªä½¿ç”¨èµ„æºï¼š
    ```bash
    docker system prune -af --volumes  # å¼ºåˆ¶æ¸…ç†å®¹å™¨/é•œåƒ/ç½‘ç»œ/å· 
    ```  

20. **`docker compose up`**  
    ç¼–æŽ’å¤šå®¹å™¨åº”ç”¨ï¼ˆå¿…å­¦ï¼ï¼‰ï¼š
    ```bash
    docker compose -f stack.yml up -d  # åŽå°å¯åŠ¨æœåŠ¡æ ˆ 
    ```  

---

### ðŸ’» å®žæˆ˜ç¤ºä¾‹ï¼šéƒ¨ç½² MySQL æœåŠ¡
```bash
# åˆ›å»ºæŒä¹…åŒ–å·
docker volume create mysql_data

# å¯åŠ¨å®¹å™¨ï¼ˆç½‘ç»œ+èµ„æºé™åˆ¶+æ•°æ®æŒä¹…åŒ–ï¼‰
docker run -d \
  --name mysql \
  -p 3306:3306 \
  -v mysql_data:/var/lib/mysql \
  -e MYSQL_ROOT_PASSWORD=secret \
  --network app_net \
  --memory 2g --cpus 1 \
  mysql:8.0
```
**å…³é”®æ­¥éª¤**ï¼š
- é€šè¿‡ `-v` æŒ‚è½½å·ä¿éšœæ•°æ®å®‰å…¨
- `--network` å®žçŽ°å®¹å™¨é—´å®‰å…¨é€šä¿¡
- `--memory` å’Œ `--cpus` é¿å…èµ„æºè¶…ç”¨

---

### ðŸ“ å‘½ä»¤é€ŸæŸ¥è¡¨ï¼ˆ20 å¤§æ ¸å¿ƒå‘½ä»¤ï¼‰
| **ç±»åˆ«**         | **å‘½ä»¤**                     | **æ ¸å¿ƒä½œç”¨**                     |
|------------------|------------------------------|----------------------------------|
| å®¹å™¨ç®¡ç†        | `docker run`                 | åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨                   |
|                  | `docker ps`                  | æŸ¥çœ‹å®¹å™¨çŠ¶æ€                     |
|                  | `docker exec`                | è¿›å…¥è¿è¡Œä¸­å®¹å™¨è°ƒè¯•               |
|                  | `docker logs`                | æŸ¥çœ‹å®¹å™¨æ—¥å¿—è¾“å‡º                 |
| é•œåƒæ“ä½œ        | `docker pull`                | æ‹‰å–è¿œç¨‹é•œåƒ                     |
|                  | `docker build`               | æž„å»ºè‡ªå®šä¹‰é•œåƒ                   |
|                  | `docker push`                | æŽ¨é€é•œåƒåˆ°ä»“åº“                   |
| ç½‘ç»œé…ç½®        | `docker network create`      | åˆ›å»ºå®¹å™¨ç½‘ç»œ                     |
|                  | `docker network connect`     | å®¹å™¨åŠ å…¥æŒ‡å®šç½‘ç»œ                 |
| æ•°æ®æŒä¹…åŒ–      | `docker volume create`       | åˆ›å»ºæŒä¹…åŒ–å­˜å‚¨å·                 |
|                  | `docker cp`                  | å®¹å™¨ä¸Žä¸»æœºé—´å¤åˆ¶æ–‡ä»¶             |
| è¿ç»´ç›‘æŽ§        | `docker stats`               | å®žæ—¶ç›‘æŽ§èµ„æºä½¿ç”¨                 |
|                  | `docker inspect`             | æŸ¥çœ‹å®¹å™¨/é•œåƒå…ƒæ•°æ®              |
| ç³»ç»Ÿç»´æŠ¤        | `docker system prune`        | æ¸…ç†æœªä½¿ç”¨èµ„æº                   |
|                  | `docker compose up`          | ä¸€é”®éƒ¨ç½²å¤šå®¹å™¨åº”ç”¨               |

---

### ðŸ’Ž æœ€ä½³å®žè·µå»ºè®®
1. **ç‰ˆæœ¬å›ºåŒ–**ï¼šç¦æ­¢ä½¿ç”¨ `latest` æ ‡ç­¾ï¼Œæ˜Žç¡®æŒ‡å®šé•œåƒç‰ˆæœ¬ï¼ˆå¦‚ `nginx:1.25.3`ï¼‰
2. **èµ„æºé™åˆ¶**ï¼šæ‰€æœ‰å®¹å™¨å¿…é¡»é€šè¿‡ `--memory` å’Œ `--cpus` é™åˆ¶èµ„æº
3. **éž root è¿è¡Œ**ï¼šä½¿ç”¨ `--user 1000:1000` é¿å…ç‰¹æƒæ“ä½œ
4. **æ—¥å¿—ç®¡ç†**ï¼šæ—¥å¿—è¾“å‡ºåˆ° `stdout/stderr`ï¼Œé…åˆ `--log-opt max-size=10m` é˜²æ­¢ç£ç›˜æ’‘çˆ†

> æŽŒæ¡è¿™ 20 ä¸ªå‘½ä»¤å¯è§£å†³ **90% çš„æ—¥å¸¸å®¹å™¨æ“ä½œ**ã€‚è¿›é˜¶å­¦ä¹ æŽ¨èï¼š
> - å¤šé˜¶æ®µæž„å»ºï¼ˆå‡å°‘é•œåƒä½“ç§¯ï¼‰
> - Swarm/K8s é›†ç¾¤ç¼–æŽ’
> - å®¹å™¨å®‰å…¨åŠ å›ºï¼ˆAppArmor/SELinuxï¼‰